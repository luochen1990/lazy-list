{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","global.js","src/global.coffee","src/lazy.coffee"],"names":["f","exports","module","define","amd","g","window","global","self","this","__lazy","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"k","lazy","v","./lazy",2,"this_module","slice","arg","CustomErrorType","Iterator","LazyList","ListError","Symbol","all","any","best","brk","cartProd","concat","cons","drop","dropWhile","enumerate","filter","foldl","foreach","fromList","groupOn","head","iterate","last","list","map","maximum","maximumOn","minimum","minimumOn","naturals","nil","partition","permutations","powerset","primes","randoms","range","ref","repeat","reverse","scanl","sort","sortOn","streak","streak2","tail","take","takeWhile","zip","zipWith","errorName","msg","CustomError","name","__proto__","prototype","iterator","toString","toJSON","it","next","value","done","args","arguments","stop","start","step","x","p","Infinity","xs","constructor","Array","String","keys","Object","init","st","hash","normal","salt","Math","PI","sin","floor","seed","opts","ref1","rg","next_permutation","m","arr","ls","json","ss","c","iter","ok","finished","j","prevx","op","got","buf","push","shift","b","fa","fb","memo","y","results","xss","xs_iter","len1","iters","apply","apply_vector","inc_vector","limits","len_minus_1","vec","space","len","get_value","inc","results1","better","all_not","pairs","arg1","callback","fruit","defineProperties","break","writable","configurable","enumerable"],"mappings":"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","file":"global.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.__lazy = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\nvar k, lazy, v;\n\nlazy = require('./lazy');\n\nfor (k in lazy) {\n  v = lazy[k];\n  global[k] = v;\n}\n\n\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./lazy\":2}],2:[function(require,module,exports){\nvar this_module,\n  slice = [].slice;\n\nthis_module = function(arg) {\n  var CustomErrorType, Iterator, LazyList, ListError, Symbol, all, any, best, brk, cartProd, concat, cons, drop, dropWhile, enumerate, filter, foldl, foreach, fromList, groupOn, head, iterate, last, lazy, length, list, map, maximum, maximumOn, minimum, minimumOn, naturals, nil, partition, permutations, powerset, primes, randoms, range, ref, repeat, reverse, scanl, sort, sortOn, streak, streak2, tail, take, takeWhile, zip, zipWith;\n  Symbol = arg.Symbol;\n  CustomErrorType = function(errorName) {\n    return function(msg) {\n      var CustomError;\n      CustomError = function(msg) {\n        var self;\n        self = new Error(msg);\n        self.name = errorName;\n        self.__proto__ = CustomError.prototype;\n        return self;\n      };\n      CustomError.prototype.__proto__ = Error.prototype;\n      return new CustomError(msg);\n    };\n  };\n  ListError = CustomErrorType('ListError');\n  LazyList = function(f) {\n    f[Symbol.iterator] = function() {\n      return f();\n    };\n    f.toString = function() {\n      return \"LazyList\";\n    };\n    f.toJSON = function() {\n      return list(f);\n    };\n    return f;\n  };\n  nil = LazyList(function() {\n    return nil;\n  });\n  nil.toString = function() {\n    return 'nil';\n  };\n  Iterator = function(it) {\n    it.next = function() {\n      var r;\n      r = it();\n      return {\n        value: r,\n        done: r === nil\n      };\n    };\n    it.toString = function() {\n      return \"Iterator\";\n    };\n    return it;\n  };\n  naturals = LazyList(function() {\n    var i;\n    i = -1;\n    return Iterator(function() {\n      return ++i;\n    });\n  });\n  range = function() {\n    var args;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (args.length === 0) {\n      return naturals;\n    } else if (args.length === 1) {\n      return LazyList(function() {\n        var i, stop;\n        stop = args[0];\n        i = -1;\n        return Iterator(function() {\n          if (++i < stop) {\n            return i;\n          } else {\n            return nil;\n          }\n        });\n      });\n    } else if (args.length === 2) {\n      return LazyList(function() {\n        var i, start, stop;\n        start = args[0], stop = args[1];\n        if (start < stop) {\n          i = start - 1;\n          return Iterator(function() {\n            if (++i < stop) {\n              return i;\n            } else {\n              return nil;\n            }\n          });\n        } else {\n          i = start + 1;\n          return Iterator(function() {\n            if (--i > stop) {\n              return i;\n            } else {\n              return nil;\n            }\n          });\n        }\n      });\n    } else {\n      return LazyList(function() {\n        var i, start, step, stop;\n        start = args[0], stop = args[1], step = args[2];\n        if (stop !== start && (stop - start) * step < 0) {\n          throw ListError('ERR IN range(): YOU ARE CREATING AN UNLIMITTED RANGE');\n        }\n        i = start - step;\n        if (start < stop) {\n          return Iterator(function() {\n            if ((i += step) < stop) {\n              return i;\n            } else {\n              return nil;\n            }\n          });\n        } else {\n          return Iterator(function() {\n            if ((i += step) > stop) {\n              return i;\n            } else {\n              return nil;\n            }\n          });\n        }\n      });\n    }\n  };\n  primes = LazyList(function() {\n    return filter(function(x) {\n      return all(function(p) {\n        return x % p !== 0;\n      })(takeWhile(function(p) {\n        return p * p <= x;\n      })(range(2, Infinity)));\n    })(range(2, Infinity))();\n  });\n  lazy = function(xs) {\n    var ref;\n    if (typeof xs === 'function') {\n      if (xs[Symbol.iterator] != null) {\n        return xs;\n      } else {\n        return LazyList(xs);\n      }\n    } else if ((ref = xs.constructor) === Array || ref === String) {\n      return LazyList(function() {\n        var i;\n        i = -1;\n        return Iterator(function() {\n          if ((++i) < xs.length) {\n            return xs[i];\n          } else {\n            return nil;\n          }\n        });\n      });\n    } else if (xs[Symbol.iterator] != null) {\n      return LazyList(function() {\n        var it;\n        it = xs[Symbol.iterator]();\n        return Iterator(function() {\n          var r;\n          r = it.next();\n          if (r.done) {\n            return nil;\n          } else {\n            return r.value;\n          }\n        });\n      });\n    } else {\n      throw ListError('lazy(xs): xs is neither Array nor Iterable');\n    }\n  };\n  enumerate = function(it) {\n    if ((it[Symbol.iterator] != null) || it instanceof Array) {\n      return zip(naturals, it);\n    } else {\n      return LazyList(function() {\n        var i, keys;\n        keys = Object.keys(it);\n        i = -1;\n        return Iterator(function() {\n          var k;\n          if (++i < keys.length) {\n            return [(k = keys[i]), it[k]];\n          } else {\n            return nil;\n          }\n        });\n      });\n    }\n  };\n  repeat = function(x) {\n    return LazyList(function() {\n      return Iterator(function() {\n        return x;\n      });\n    });\n  };\n  iterate = function(next, init) {\n    return LazyList(function() {\n      var st;\n      st = init;\n      return Iterator(function() {\n        var r;\n        r = st;\n        st = next(st);\n        return r;\n      });\n    });\n  };\n  randoms = (function() {\n    var hash, normal, salt;\n    salt = Math.PI / 3.0;\n    hash = function(x) {\n      x = Math.sin(x + salt) * 1e4;\n      return x - Math.floor(x);\n    };\n    normal = function(seed) {\n      return iterate(hash, hash(seed));\n    };\n    return function(opts) {\n      var k, ref, ref1, rg, s, seed;\n      if (opts == null) {\n        return normal(0);\n      } else if (typeof opts === 'number') {\n        return normal(opts);\n      } else {\n        seed = (ref = opts.seed) != null ? ref : 0;\n        rg = opts.range;\n        if (rg != null) {\n          if (typeof rg === 'number') {\n            return map(function(x) {\n              return Math.floor(x * rg);\n            })(normal(seed));\n          } else {\n            ref1 = [rg[0], rg[1] - rg[0] + 1], s = ref1[0], k = ref1[1];\n            return map(function(x) {\n              return s + Math.floor(x * k);\n            })(normal(seed));\n          }\n        } else {\n          return normal(seed);\n        }\n      }\n    };\n  })();\n  permutations = (function() {\n    var next_permutation;\n    next_permutation = function(x) {\n      var l, m, r, ref, ref1;\n      x = x.slice(0);\n      l = x.length - 1;\n      while (l >= 1 && x[l] <= x[l - 1]) {\n        --l;\n      }\n      if (l !== 0) {\n        m = x.length - 1;\n        while (m > l - 1 && x[m] <= x[l - 1]) {\n          --m;\n        }\n        ref = [x[l - 1], x[m]], x[m] = ref[0], x[l - 1] = ref[1];\n      }\n      r = x.length - 1;\n      while (l < r) {\n        ref1 = [x[r], x[l]], x[l] = ref1[0], x[r] = ref1[1];\n        ++l;\n        --r;\n      }\n      return x;\n    };\n    return function(xs) {\n      var arr;\n      arr = list(xs);\n      if (arr.length === 0) {\n        return nil;\n      } else {\n        return cons(arr.slice(0))(takeWhile(function(ls) {\n          return json(ls) !== json(arr);\n        })(drop(1)(iterate(next_permutation, arr))));\n      }\n    };\n  })();\n  powerset = function(xs) {\n    var ss;\n    if (length(xs) === 0) {\n      return [[]];\n    } else {\n      ss = powerset(drop(1)(xs));\n      return concat([ss, map(cons(head(xs)))(ss)]);\n    }\n  };\n  take = function(n) {\n    return function(xs) {\n      return LazyList(function() {\n        var c, iter;\n        iter = lazy(xs)[Symbol.iterator]();\n        c = -1;\n        return Iterator(function() {\n          if (++c < n) {\n            return iter();\n          } else {\n            return nil;\n          }\n        });\n      });\n    };\n  };\n  takeWhile = function(ok) {\n    return function(xs) {\n      return LazyList(function() {\n        var iter;\n        iter = lazy(xs)[Symbol.iterator]();\n        return Iterator(function() {\n          var x;\n          if ((x = iter()) !== nil && ok(x)) {\n            return x;\n          } else {\n            return nil;\n          }\n        });\n      });\n    };\n  };\n  drop = function(n) {\n    return function(xs) {\n      return LazyList(function() {\n        var finished, i, iter, j, ref;\n        iter = lazy(xs)[Symbol.iterator]();\n        finished = false;\n        for (i = j = 0, ref = n; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          finished || (finished = iter() === nil);\n          if (finished) {\n            break;\n          }\n        }\n        if (finished) {\n          return function() {\n            return nil;\n          };\n        } else {\n          return iter;\n        }\n      });\n    };\n  };\n  dropWhile = function(ok) {\n    return function(xs) {\n      return LazyList(function() {\n        var iter, x;\n        iter = lazy(xs)[Symbol.iterator]();\n        while (ok(x = iter()) && x !== nil) {\n          null;\n        }\n        return Iterator(function() {\n          var prevx, ref;\n          ref = [x, iter()], prevx = ref[0], x = ref[1];\n          return prevx;\n        });\n      });\n    };\n  };\n  cons = function(x) {\n    return function(xs) {\n      return LazyList(function() {\n        var iter;\n        iter = null;\n        return Iterator(function() {\n          if (iter === null) {\n            iter = lazy(xs)[Symbol.iterator]();\n            return x;\n          } else {\n            return iter();\n          }\n        });\n      });\n    };\n  };\n  map = function(f) {\n    return function(xs) {\n      return LazyList(function() {\n        var iter;\n        iter = lazy(xs)[Symbol.iterator]();\n        return Iterator(function() {\n          var x;\n          if ((x = iter()) !== nil) {\n            return f(x);\n          } else {\n            return nil;\n          }\n        });\n      });\n    };\n  };\n  filter = function(ok) {\n    return function(xs) {\n      return LazyList(function() {\n        var iter;\n        iter = lazy(xs)[Symbol.iterator]();\n        return Iterator(function() {\n          var x;\n          while ((x = iter()) !== nil && !ok(x)) {\n            null;\n          }\n          return x;\n        });\n      });\n    };\n  };\n  scanl = function(op) {\n    return function(r) {\n      return function(xs) {\n        return LazyList(function() {\n          var iter;\n          iter = lazy(xs)[Symbol.iterator]();\n          return Iterator(function() {\n            var got, x;\n            got = r;\n            r = (x = iter()) !== nil ? op(r)(x) : nil;\n            return got;\n          });\n        });\n      };\n    };\n  };\n  streak = function(n) {\n    if (n < 1) {\n      return nil;\n    } else {\n      return function(xs) {\n        return drop(n - 1)(LazyList(function() {\n          var buf, iter;\n          iter = lazy(xs)[Symbol.iterator]();\n          buf = [];\n          return Iterator(function() {\n            var x;\n            if ((x = iter()) === nil) {\n              return nil;\n            }\n            buf.push(x);\n            if (buf.length > n) {\n              buf.shift(1);\n            }\n            return buf.slice(0);\n          });\n        }));\n      };\n    }\n  };\n  streak2 = function(n) {\n    return function(xs) {\n      return streak(n)(concat([xs, take(n - 1)(xs)]));\n    };\n  };\n  reverse = function(xs) {\n    var ref;\n    if ((ref = xs.constructor) === Array || ref === String) {\n      return LazyList(function() {\n        var i;\n        i = xs.length;\n        return Iterator(function() {\n          if ((--i) >= 0) {\n            return xs[i];\n          } else {\n            return nil;\n          }\n        });\n      });\n    } else {\n      return list(lazy(xs)).reverse();\n    }\n  };\n  sort = function(xs) {\n    var arr;\n    arr = list(lazy(xs));\n    return arr.sort(function(a, b) {\n      return (a > b) - (a < b);\n    });\n  };\n  sortOn = function(f) {\n    return function(xs) {\n      var arr;\n      arr = list(lazy(xs));\n      return arr.sort(function(a, b) {\n        var fa, fb;\n        return ((fa = f(a)) > (fb = f(b))) - (fa < fb);\n      });\n    };\n  };\n  groupOn = function(f) {\n    return function(xs) {\n      var k, memo, v;\n      memo = {};\n      foreach(xs, function(x) {\n        var y;\n        y = f(x);\n        if (memo[y] == null) {\n          memo[y] = [];\n        }\n        return memo[y].push(x);\n      });\n      return (function() {\n        var results;\n        results = [];\n        for (k in memo) {\n          v = memo[k];\n          results.push(v);\n        }\n        return results;\n      })();\n    };\n  };\n  partition = function(f) {\n    return function(xs) {\n      var memo;\n      memo = [[], []];\n      foreach(xs, function(x) {\n        var y;\n        y = !f(x) + 0;\n        return memo[y].push(x);\n      });\n      return memo;\n    };\n  };\n  concat = function(xss) {\n    xss = filter(function(x) {\n      var ref;\n      return ((ref = x.constructor) !== Array && ref !== String) || x.length > 0;\n    })(xss);\n    return LazyList(function() {\n      var iter, xs, xs_iter;\n      xs_iter = lazy(xss)[Symbol.iterator]();\n      xs = xs_iter();\n      iter = lazy(xs)[Symbol.iterator]();\n      return Iterator(function() {\n        var x;\n        if ((x = iter()) !== nil) {\n          return x;\n        } else if ((xs = xs_iter()) !== nil) {\n          iter = lazy(xs)[Symbol.iterator]();\n          return iter();\n        } else {\n          return nil;\n        }\n      });\n    });\n  };\n  ref = (function() {\n    var finished, zip, zipWith;\n    finished = function(arr) {\n      var j, len1, x;\n      for (j = 0, len1 = arr.length; j < len1; j++) {\n        x = arr[j];\n        if (x === nil) {\n          return true;\n        }\n      }\n      return false;\n    };\n    zip = function() {\n      var xss;\n      xss = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return LazyList(function() {\n        var iters, xs;\n        iters = (function() {\n          var j, len1, results;\n          results = [];\n          for (j = 0, len1 = xss.length; j < len1; j++) {\n            xs = xss[j];\n            results.push(lazy(xs)[Symbol.iterator]());\n          }\n          return results;\n        })();\n        return Iterator(function() {\n          var iter, next;\n          next = (function() {\n            var j, len1, results;\n            results = [];\n            for (j = 0, len1 = iters.length; j < len1; j++) {\n              iter = iters[j];\n              results.push(iter());\n            }\n            return results;\n          })();\n          if (finished(next)) {\n            return nil;\n          } else {\n            return next;\n          }\n        });\n      });\n    };\n    zipWith = function(f) {\n      return function() {\n        var xss;\n        xss = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n        return LazyList(function() {\n          var iters, xs;\n          iters = (function() {\n            var j, len1, results;\n            results = [];\n            for (j = 0, len1 = xss.length; j < len1; j++) {\n              xs = xss[j];\n              results.push(lazy(xs)[Symbol.iterator]());\n            }\n            return results;\n          })();\n          return Iterator(function() {\n            var iter, next;\n            next = (function() {\n              var j, len1, results;\n              results = [];\n              for (j = 0, len1 = iters.length; j < len1; j++) {\n                iter = iters[j];\n                results.push(iter());\n              }\n              return results;\n            })();\n            if (finished(next)) {\n              return nil;\n            } else {\n              return f.apply(null, next);\n            }\n          });\n        });\n      };\n    };\n    return {\n      zip: zip,\n      zipWith: zipWith\n    };\n  })(), zip = ref.zip, zipWith = ref.zipWith;\n  cartProd = (function() {\n    var apply_vector, inc_vector;\n    inc_vector = function(limits) {\n      var len_minus_1;\n      len_minus_1 = limits.length - 1;\n      return function(vec) {\n        var i;\n        i = len_minus_1;\n        while (!(++vec[i] < limits[i] || i <= 0)) {\n          vec[i--] = 0;\n        }\n        return vec;\n      };\n    };\n    apply_vector = function(space) {\n      var len;\n      len = space.length;\n      return function(vec) {\n        var i, j, ref1, results;\n        results = [];\n        for (i = j = 0, ref1 = len; 0 <= ref1 ? j < ref1 : j > ref1; i = 0 <= ref1 ? ++j : --j) {\n          results.push(space[i][vec[i]]);\n        }\n        return results;\n      };\n    };\n    return function() {\n      var xss;\n      xss = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return LazyList(function() {\n        var get_value, i, inc, j, len, len1, limits, v, xs;\n        xss = (function() {\n          var j, len1, results;\n          results = [];\n          for (j = 0, len1 = xss.length; j < len1; j++) {\n            xs = xss[j];\n            results.push(list(xs));\n          }\n          return results;\n        })();\n        limits = (function() {\n          var j, ref1, results;\n          results = [];\n          for (i = j = 0, ref1 = xss.length; 0 <= ref1 ? j < ref1 : j > ref1; i = 0 <= ref1 ? ++j : --j) {\n            results.push(xss[i].length);\n          }\n          return results;\n        })();\n        for (j = 0, len1 = limits.length; j < len1; j++) {\n          len = limits[j];\n          if (len === 0) {\n            return nil;\n          }\n        }\n        inc = inc_vector(limits);\n        get_value = apply_vector(xss);\n        v = (function() {\n          var o, ref1, results;\n          results = [];\n          for (i = o = 0, ref1 = xss.length; 0 <= ref1 ? o < ref1 : o > ref1; i = 0 <= ref1 ? ++o : --o) {\n            results.push(0);\n          }\n          return results;\n        })();\n        return Iterator(function() {\n          var r;\n          if (v[0] < limits[0]) {\n            r = get_value(v);\n            inc(v);\n            return r;\n          } else {\n            return nil;\n          }\n        });\n      });\n    };\n  })();\n  list = function(xs) {\n    var it, n, results, results1, x;\n    if (xs instanceof Array) {\n      return xs;\n    } else if (typeof xs === 'function') {\n      it = xs[Symbol.iterator]();\n      results = [];\n      while ((x = it()) !== nil) {\n        results.push(x);\n      }\n      return results;\n    } else if (xs[Symbol.iterator] != null) {\n      it = lazy(xs)[Symbol.iterator]();\n      results1 = [];\n      while ((x = it()) !== nil) {\n        results1.push(x);\n      }\n      return results1;\n    } else if (typeof xs === 'number') {\n      n = xs;\n      return function(xs) {\n        return list(take(n)(xs));\n      };\n    } else {\n      throw ListError('list(xs): xs is neither Array nor Iterable');\n    }\n  };\n  head = function(xs) {\n    var iter, r, ref1;\n    if ((ref1 = xs.constructor) === Array || ref1 === String) {\n      if (xs.length > 0) {\n        return xs[0];\n      } else {\n        throw ListError(\"head() used on empty list.\");\n      }\n    } else {\n      iter = lazy(xs)[Symbol.iterator]();\n      if ((r = iter()) !== nil) {\n        return r;\n      } else {\n        throw ListError(\"head() used on empty list.\");\n      }\n    }\n  };\n  tail = drop(1);\n  last = function(xs) {\n    var iter, r, ref1, x;\n    if ((ref1 = xs.constructor) === Array || ref1 === String) {\n      if (xs.length > 0) {\n        return xs[xs.length - 1];\n      } else {\n        throw ListError(\"last() used on empty list.\");\n      }\n    } else {\n      iter = lazy(xs)[Symbol.iterator]();\n      r = nil;\n      while ((x = iter()) !== nil) {\n        r = x;\n      }\n      if (r !== nil) {\n        return r;\n      } else {\n        throw ListError(\"last() used on empty list.\");\n      }\n    }\n  };\n  length = function(xs) {\n    var iter, r, ref1, x;\n    if ((ref1 = xs.constructor) === Array || ref1 === String) {\n      return xs.length;\n    } else {\n      iter = lazy(xs)[Symbol.iterator]();\n      r = 0;\n      while ((x = iter()) !== nil) {\n        ++r;\n      }\n      return r;\n    }\n  };\n  foldl = function(op) {\n    return function(init) {\n      return function(xs) {\n        var iter, r, x;\n        r = init;\n        iter = lazy(xs)[Symbol.iterator]();\n        while ((x = iter()) !== nil) {\n          r = op(r)(x);\n        }\n        return r;\n      };\n    };\n  };\n  best = function(better) {\n    return function(xs) {\n      var it, iter, r;\n      iter = lazy(xs)[Symbol.iterator]();\n      if ((r = iter()) === nil) {\n        return null;\n      }\n      while ((it = iter()) !== nil) {\n        r = better(it, r) ? it : r;\n      }\n      return r;\n    };\n  };\n  maximumOn = function(f) {\n    return best(function(a, b) {\n      return f(a) > f(b);\n    });\n  };\n  minimumOn = function(f) {\n    return best(function(a, b) {\n      return f(a) < f(b);\n    });\n  };\n  maximum = best(function(x, y) {\n    return x > y;\n  });\n  minimum = best(function(x, y) {\n    return x < y;\n  });\n  all = function(f) {\n    if (typeof f !== 'function') {\n      f = (function(x) {\n        return x === f;\n      });\n    }\n    return function(xs) {\n      var iter, x;\n      iter = lazy(xs)[Symbol.iterator]();\n      while ((x = iter()) !== nil) {\n        if (!f(x)) {\n          return false;\n        }\n      }\n      return true;\n    };\n  };\n  any = function(f) {\n    var all_not;\n    all_not = all(function(x) {\n      return !f(x);\n    });\n    return function(xs) {\n      return !(all_not(xs));\n    };\n  };\n  fromList = function(pairs) {\n    var r;\n    r = {};\n    foreach(pairs, function(arg1) {\n      var k, v;\n      k = arg1[0], v = arg1[1];\n      if (v !== void 0) {\n        return r[k] = v;\n      }\n    });\n    return r;\n  };\n  brk = function() {\n    return brk;\n  };\n  brk.toString = function() {\n    return 'foreach.break';\n  };\n  foreach = function(xs, callback, fruit) {\n    var iter, x;\n    iter = lazy(xs)[Symbol.iterator]();\n    while ((x = iter()) !== nil) {\n      if (callback(x, fruit) === brk) {\n        break;\n      }\n    }\n    return fruit;\n  };\n  Object.defineProperties(foreach, {\n    \"break\": {\n      writable: false,\n      configurable: false,\n      enumerable: false,\n      value: brk\n    }\n  });\n  return {\n    nil: nil,\n    LazyList: LazyList,\n    Iterator: Iterator,\n    Symbol: Symbol,\n    naturals: naturals,\n    range: range,\n    primes: primes,\n    lazy: lazy,\n    enumerate: enumerate,\n    repeat: repeat,\n    iterate: iterate,\n    randoms: randoms,\n    permutations: permutations,\n    powerset: powerset,\n    cons: cons,\n    map: map,\n    filter: filter,\n    take: take,\n    takeWhile: takeWhile,\n    tail: tail,\n    drop: drop,\n    dropWhile: dropWhile,\n    scanl: scanl,\n    streak: streak,\n    streak2: streak2,\n    reverse: reverse,\n    sort: sort,\n    sortOn: sortOn,\n    groupOn: groupOn,\n    partition: partition,\n    concat: concat,\n    zip: zip,\n    zipWith: zipWith,\n    cartProd: cartProd,\n    list: list,\n    head: head,\n    last: last,\n    length: length,\n    foldl: foldl,\n    best: best,\n    maximum: maximum,\n    minimum: minimum,\n    maximumOn: maximumOn,\n    minimumOn: minimumOn,\n    all: all,\n    any: any,\n    fromList: fromList,\n    foreach: foreach\n  };\n};\n\nmodule.exports = this_module({\n  Symbol: typeof Symbol !== \"undefined\" && Symbol !== null ? Symbol : {\n    iterator: 'iter'\n  }\n});\n\n\n},{}]},{},[1])(1)\n});\n\n//# sourceMappingURL=global.js.map\n","lazy = require('./lazy')\nglobal[k] = v for k, v of lazy\n","this_module = ({Symbol}) ->\n\tCustomErrorType = (errorName) ->\n\t\t(msg) ->\n\t\t\tCustomError = (msg)->\n\t\t\t\tself = new Error msg\n\t\t\t\tself.name = errorName\n\t\t\t\tself.__proto__ = CustomError.prototype\n\t\t\t\treturn self\n\t\t\tCustomError.prototype.__proto__= Error.prototype\n\t\t\treturn new CustomError(msg)\n\n\tListError = CustomErrorType('ListError')\n\n\t# LazyList definition: nil, LazyList, Iterator,\n\n\tLazyList = (f) -> # construct a LazyList from a function.\n\t\tf[Symbol.iterator] = -> f()\n\t\tf.toString = -> \"LazyList\"\n\t\tf.toJSON = -> list f\n\t\treturn f\n\n\tnil = LazyList -> nil # xs is empty <==> xs is nil or xs() is nil or xs()() is nil... <==> last xs is nil\n\tnil.toString = -> 'nil'\n\n\tIterator = (it) -> # construct an Iterator(which is a function with status) from a function.\n\t\tit.next = ->\n\t\t\tr = it()\n\t\t\t{value: r, done: r == nil}\n\t\tit.toString = -> \"Iterator\"\n\t\treturn it\n\n\t# LazyList constants: naturals, range, primes,\n\n\tnaturals =\n\t\tLazyList ->\n\t\t\ti = -1\n\t\t\tIterator ->\n\t\t\t\t++i\n\n\trange = (args...) ->\n\t\tif args.length == 0\n\t\t\tnaturals\n\t\telse if args.length == 1\n\t\t\tLazyList ->\n\t\t\t\t[stop] = args\n\t\t\t\ti = -1\n\t\t\t\tIterator ->\n\t\t\t\t\tif ++i < stop then i else nil\n\t\telse if args.length == 2\n\t\t\tLazyList ->\n\t\t\t\t[start, stop] = args\n\t\t\t\tif start < stop\n\t\t\t\t\ti = start - 1\n\t\t\t\t\tIterator ->\n\t\t\t\t\t\tif ++i < stop then i else nil\n\t\t\t\telse\n\t\t\t\t\ti = start + 1\n\t\t\t\t\tIterator ->\n\t\t\t\t\t\tif --i > stop then i else nil\n\t\telse\n\t\t\tLazyList ->\n\t\t\t\t[start, stop, step] = args\n\t\t\t\tthrow ListError 'ERR IN range(): YOU ARE CREATING AN UNLIMITTED RANGE' if stop != start and (stop - start) * step < 0\n\t\t\t\ti = start - step\n\t\t\t\tif start < stop\n\t\t\t\t\tIterator ->\n\t\t\t\t\t\tif (i += step) < stop then i else nil\n\t\t\t\telse\n\t\t\t\t\tIterator ->\n\t\t\t\t\t\tif (i += step) > stop then i else nil\n\n\tprimes = LazyList -> do\n\t\tfilter((x) -> all((p) -> x % p != 0) takeWhile((p) -> p * p <= x) range(2, Infinity)) range(2, Infinity)\n\n\t# LazyList producers: lazy, enumerate, iterate, randoms, permutations, powerset\n\n\tlazy = (xs) -> #make a LazyList from Function/LazyList/Array/String/ES6Lazy\n\t\tif typeof xs is 'function'\n\t\t\tif xs[Symbol.iterator]? #xs is LazyList\n\t\t\t\txs\n\t\t\telse #xs is Function\n\t\t\t\tLazyList xs\n\t\telse if xs.constructor in [Array, String] #xs is Array or String\n\t\t\tLazyList ->\n\t\t\t\ti = -1\n\t\t\t\tIterator ->\n\t\t\t\t\tif (++i) < xs.length then xs[i] else nil\n\t\telse if xs[Symbol.iterator]? #xs is ES6Lazy\n\t\t\tLazyList ->\n\t\t\t\tit = xs[Symbol.iterator]()\n\t\t\t\tIterator ->\n\t\t\t\t\tr = it.next()\n\t\t\t\t\tif r.done then nil else r.value\n\t\telse\n\t\t\tthrow ListError 'lazy(xs): xs is neither Array nor Iterable'\n\n\tenumerate = (it) -> # Iterator with index(with key for object)\n\t\tif it[Symbol.iterator]? or it instanceof Array\n\t\t\tzip(naturals, it)\n\t\telse\n\t\t\tLazyList ->\n\t\t\t\tkeys = Object.keys(it)\n\t\t\t\ti = -1\n\t\t\t\tIterator ->\n\t\t\t\t\tif ++i < keys.length then [(k = keys[i]), it[k]] else nil\n\n\trepeat = (x) -> # repeat x\n\t\tLazyList ->\n\t\t\tIterator ->\n\t\t\t\tx\n\n\titerate = (next, init) -> #function next should not change it's argument\n\t\tLazyList ->\n\t\t\tst = init\n\t\t\tIterator ->\n\t\t\t\tr = st\n\t\t\t\tst = next st\n\t\t\t\treturn r\n\n\trandoms = do -> #NOTE: unstandard!\n\t\tsalt = Math.PI / 3.0\n\n\t\thash = (x) ->\n\t\t\tx = Math.sin(x + salt) * 1e4\n\t\t\tx - Math.floor(x)\n\n\n\t\tnormal = (seed) -> iterate hash, hash(seed)\n\n\t\t(opts) ->\n\t\t\tif not opts?\n\t\t\t\tnormal(0)\n\t\t\telse if typeof opts is 'number'\n\t\t\t\tnormal(opts)\n\t\t\telse\n\t\t\t\tseed = opts.seed ? 0\n\t\t\t\trg = opts.range\n\t\t\t\tif rg?\n\t\t\t\t\tif typeof rg is 'number'\n\t\t\t\t\t\tmap((x) -> Math.floor(x * rg)) normal(seed)\n\t\t\t\t\telse\n\t\t\t\t\t\t[s, k] = [rg[0], rg[1] - rg[0] + 1]\n\t\t\t\t\t\tmap((x) -> s + Math.floor(x * k)) normal(seed)\n\t\t\t\telse\n\t\t\t\t\tnormal(seed)\n\n\tpermutations = do ->\n\t\tnext_permutation = (x) ->\n\t\t\tx = x[...]\n\t\t\tl = x.length - 1\n\t\t\t--l while l >= 1 and x[l] <= x[l - 1]\n\n\t\t\tif (l != 0)\n\t\t\t\tm = x.length - 1\n\t\t\t\t--m while m > l - 1 and x[m] <= x[l - 1]\n\t\t\t\t[x[m], x[l - 1]] = [x[l - 1], x[m]]\n\n\t\t\tr = x.length - 1\n\t\t\twhile(l < r)\n\t\t\t\t[x[l], x[r]] = [x[r], x[l]]\n\t\t\t\t++l\n\t\t\t\t--r\n\t\t\treturn x\n\n\t\t(xs) ->\n\t\t\tarr = list xs\n\t\t\tif arr.length == 0 then nil else\n\t\t\t\tcons(arr[...]) takeWhile((ls) -> json(ls) != json(arr)) drop(1) iterate(next_permutation, arr)\n\n\tpowerset = (xs) -> if length(xs) == 0 then [[]] else (ss = powerset(drop(1) xs); concat([ss, map(cons head(xs))(ss)]))\n\n\t# LazyList decorators: take, takeWhile, drop, dropWhile, cons, map, filter, scanl, streak, streak2, reverse, sort, sortOn\n\n\ttake = (n) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tc = -1\n\t\t\t\tIterator ->\n\t\t\t\t\tif ++c < n then iter() else nil\n\n\ttakeWhile = (ok) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tIterator ->\n\t\t\t\t\tif (x = iter()) isnt nil and ok(x) then x else nil\n\n\tdrop = (n) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tfinished = false\n\t\t\t\t(finished or= (iter() is nil); break if finished) for i in [0...n]\n\t\t\t\tif finished then (-> nil) else iter\n\n\tdropWhile = (ok) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tnull while ok(x = iter()) and x isnt nil\n\t\t\t\tIterator ->\n\t\t\t\t\t[prevx, x] = [x, iter()]\n\t\t\t\t\treturn prevx\n\n\tcons = (x) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = null\n\t\t\t\tIterator ->\n\t\t\t\t\tif iter is null\n\t\t\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\t\t\treturn x\n\t\t\t\t\telse\n\t\t\t\t\t\treturn iter()\n\n\tmap = (f) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tIterator ->\n\t\t\t\t\tif (x = iter()) isnt nil then f(x) else nil\n\n\tfilter = (ok) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tIterator ->\n\t\t\t\t\tnull while (x = iter()) isnt nil and not ok(x)\n\t\t\t\t\treturn x\n\n\tscanl = (op) -> (r) ->\n\t\t(xs) ->\n\t\t\tLazyList ->\n\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\tIterator ->\n\t\t\t\t\tgot = r\n\t\t\t\t\tr = if (x = iter()) isnt nil then op(r)(x) else nil\n\t\t\t\t\treturn got\n\n\tstreak = (n) -> #NOTE: unstandard!\n\t\tif n < 1\n\t\t\tnil\n\t\telse\n\t\t\t(xs) ->\n\t\t\t\tdrop(n - 1) LazyList ->\n\t\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\t\tbuf = []\n\t\t\t\t\tIterator ->\n\t\t\t\t\t\treturn nil if (x = iter()) is nil\n\t\t\t\t\t\tbuf.push(x)\n\t\t\t\t\t\tbuf.shift(1) if buf.length > n\n\t\t\t\t\t\treturn buf[...]\n\n\tstreak2 = (n) -> (xs) -> streak(n) concat [xs, take(n - 1) xs] #NOTE: unstandard!\n\n\treverse = (xs) ->\n\t\tif xs.constructor in [Array, String] #xs is Array or String\n\t\t\tLazyList ->\n\t\t\t\ti = xs.length\n\t\t\t\tIterator ->\n\t\t\t\t\tif (--i) >= 0 then xs[i] else nil\n\t\telse #NOTE: strict!\n\t\t\tlist(lazy(xs)).reverse()\n\n\tsort = (xs) -> #NOTE: strict!\n\t\tarr = list lazy(xs)\n\t\treturn arr.sort((a, b) -> (a > b) - (a < b))\n\n\tsortOn = (f) -> #NOTE: strict! # f :: (Comparable b) => a -> b\n\t\t(xs) ->\n\t\t\tarr = list lazy(xs)\n\t\t\treturn arr.sort((a, b) -> ((fa = f(a)) > (fb = f(b))) - (fa < fb))\n\n\t# LazyList spliters: partition, groupOn,\n\n\tgroupOn = (f) -> #NOTE: strict! # f :: (Hashable b) => a -> b\n\t\t(xs) ->\n\t\t\tmemo = {}\n\t\t\tforeach xs, (x) ->\n\t\t\t\ty = f(x)\n\t\t\t\tmemo[y] ?= []\n\t\t\t\tmemo[y].push(x)\n\t\t\treturn (v for k, v of memo)\n\n\tpartition = (f) -> #NOTE: strict! # f :: a -> Bool\n\t\t(xs) ->\n\t\t\tmemo = [[], []]\n\t\t\tforeach xs, (x) ->\n\t\t\t\ty = !f(x) + 0\n\t\t\t\tmemo[y].push(x)\n\t\t\treturn memo\n\n\t# LazyList combiners: concat, zip, zipWith, cartProd,\n\n\tconcat = (xss) ->\n\t\txss = filter((x) -> x.constructor not in [Array, String] or x.length > 0) xss #TODO: more precise\n\t\tLazyList ->\n\t\t\txs_iter = lazy(xss)[Symbol.iterator]()\n\t\t\txs = xs_iter()\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\tIterator ->\n\t\t\t\tif (x = iter()) isnt nil\n\t\t\t\t\treturn x\n\t\t\t\telse if (xs = xs_iter()) isnt nil\n\t\t\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\t\t\treturn iter()\n\t\t\t\telse\n\t\t\t\t\treturn nil\n\n\t{zip, zipWith} = do ->\n\t\tfinished = (arr) ->\n\t\t\tfor x in arr\n\t\t\t\treturn true if x is nil\n\t\t\treturn false\n\n\t\tzip = (xss...) ->\n\t\t\tLazyList ->\n\t\t\t\titers = (lazy(xs)[Symbol.iterator]() for xs in xss)\n\t\t\t\tIterator ->\n\t\t\t\t\tnext = (iter() for iter in iters)\n\t\t\t\t\tif finished(next)\n\t\t\t\t\t\treturn nil\n\t\t\t\t\telse\n\t\t\t\t\t\treturn next\n\n\t\tzipWith = (f) -> (xss...) ->\n\t\t\tLazyList ->\n\t\t\t\titers = (lazy(xs)[Symbol.iterator]() for xs in xss)\n\t\t\t\tIterator ->\n\t\t\t\t\tnext = (iter() for iter in iters)\n\t\t\t\t\tif finished(next)\n\t\t\t\t\t\treturn nil\n\t\t\t\t\telse\n\t\t\t\t\t\treturn f(next...)\n\n\t\treturn {zip, zipWith}\n\n\tcartProd = do -> # cartesian product\n\t\tinc_vector = (limits) ->\n\t\t\tlen_minus_1 = limits.length - 1\n\t\t\t(vec) ->\n\t\t\t\ti = len_minus_1\n\t\t\t\tvec[i--] = 0 until ++vec[i] < limits[i] or i <= 0\n\t\t\t\treturn vec\n\n\t\tapply_vector = (space) ->\n\t\t\tlen = space.length\n\t\t\t(vec) ->\n\t\t\t\t(space[i][vec[i]] for i in [0...len])\n\n\t\t(xss...) ->\n\t\t\tLazyList ->\n\t\t\t\txss = (list(xs) for xs in xss)\n\t\t\t\tlimits = (xss[i].length for i in [0...xss.length])\n\t\t\t\t(return nil if len is 0) for len in limits\n\t\t\t\tinc = inc_vector(limits)\n\t\t\t\tget_value = apply_vector(xss)\n\t\t\t\tv = (0 for i in [0...xss.length])\n\t\t\t\tIterator ->\n\t\t\t\t\tif v[0] < limits[0] then (r = get_value v; inc v; r) else nil\n\n\t# LazyList consumers: list, head, last, length, foldl, best, maximum, minimum, maximumOn, minimumOn, all, any, foreach,\n\n\tlist = (xs) -> #force list elements of the LazyList to get an array\n\t\tif xs instanceof Array\n\t\t\txs\n\t\telse if typeof xs is 'function'\n\t\t\tit = xs[Symbol.iterator]()\n\t\t\t(x while (x = it()) isnt nil)\n\t\telse if xs[Symbol.iterator]?\n\t\t\tit = lazy(xs)[Symbol.iterator]()\n\t\t\t(x while (x = it()) isnt nil)\n\t\telse if typeof xs is 'number'\n\t\t\tn = xs\n\t\t\t(xs) -> list take(n) xs\n\t\telse\n\t\t\tthrow ListError 'list(xs): xs is neither Array nor Iterable'\n\n\thead = (xs) -> #returns error if xs is empty\n\t\tif xs.constructor in [Array, String]\n\t\t\tif xs.length > 0\n\t\t\t\treturn xs[0]\n\t\t\telse\n\t\t\t\tthrow ListError \"head() used on empty list.\"\n\t\telse\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\tif (r = iter()) isnt nil\n\t\t\t\treturn r\n\t\t\telse\n\t\t\t\tthrow ListError \"head() used on empty list.\"\n\n\ttail = drop(1)\n\n\tlast = (xs) -> #returns error if xs is empty\n\t\tif xs.constructor in [Array, String]\n\t\t\tif xs.length > 0\n\t\t\t\treturn xs[xs.length - 1]\n\t\t\telse\n\t\t\t\tthrow ListError \"last() used on empty list.\"\n\t\telse\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\tr = nil\n\t\t\tr = x while (x = iter()) isnt nil\n\t\t\tif r isnt nil\n\t\t\t\treturn r\n\t\t\telse\n\t\t\t\tthrow ListError \"last() used on empty list.\"\n\n\tlength = (xs) ->\n\t\tif xs.constructor in [Array, String] then xs.length else\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\tr = 0\n\t\t\t++r while (x = iter()) isnt nil\n\t\t\treturn r\n\n\tfoldl = (op) -> (init) ->\n\t\t(xs) ->\n\t\t\tr = init\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\tr = op(r)(x) while (x = iter()) isnt nil\n\t\t\treturn r\n\n\tbest = (better) -> #NOTE: unstandard!\n\t\t(xs) ->\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\treturn null if (r = iter()) is nil\n\t\t\twhile (it = iter()) isnt nil\n\t\t\t\tr = if better(it, r) then it else r\n\t\t\treturn r\n\n\tmaximumOn = (f) -> best((a, b) -> f(a) > f(b)) #NOTE: unstandard!\n\tminimumOn = (f) -> best((a, b) -> f(a) < f(b)) #NOTE: unstandard!\n\n\tmaximum = best((x, y) -> x > y)\n\tminimum = best((x, y) -> x < y)\n\n\tall = (f) ->\n\t\tf = ((x) -> x is f) if typeof(f) isnt 'function'\n\t\t(xs) ->\n\t\t\titer = lazy(xs)[Symbol.iterator]()\n\t\t\twhile (x = iter()) isnt nil\n\t\t\t\treturn false if not f(x)\n\t\t\treturn true\n\n\tany = (f) ->\n\t\tall_not = all (x) -> not f(x)\n\t\t(xs) -> not (all_not xs)\n\n\tfromList = (pairs) ->\n\t\tr = {}\n\t\tforeach pairs, ([k, v]) ->\n\t\t\tr[k] = v if v isnt undefined\n\t\treturn r\n\n\tbrk = -> brk\n\tbrk.toString = -> 'foreach.break'\n\n\tforeach = (xs, callback, fruit) ->\n\t\titer = lazy(xs)[Symbol.iterator]()\n\t\twhile (x = iter()) isnt nil\n\t\t\tbreak if callback(x, fruit) is brk\n\t\tfruit\n\n\tObject.defineProperties foreach,\n\t\tbreak:\n\t\t\twritable: false\n\t\t\tconfigurable: false\n\t\t\tenumerable: false\n\t\t\tvalue: brk\n\n\treturn {\n\t\t# LazyList definition\n\t\tnil, LazyList, Iterator, Symbol,\n\n\t\t# LazyList constants\n\t\tnaturals, range, primes,\n\n\t\t# LazyList producers\n\t\tlazy, enumerate, repeat, iterate, randoms, permutations, powerset,\n\n\t\t# LazyList decorators\n\t\tcons, map, filter, take, takeWhile, tail, drop, dropWhile, scanl, streak, streak2, reverse, sort, sortOn,\n\n\t\t# LazyList spliters\n\t\tgroupOn, partition,\n\n\t\t# LazyList combiners\n\t\tconcat, zip, zipWith, cartProd,\n\n\t\t# LazyList consumers\n\t\tlist, head, last, length, foldl, best, maximum, minimum, maximumOn, minimumOn, all, any, fromList, foreach,\n\t}\n\nmodule.exports = this_module\n\tSymbol: Symbol ? {iterator: 'iter'}\n\n"]}